<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FAHE: Fast Additive Homomorphic Encryption (FAHE) Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fahe_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FAHE
   </div>
   <div id="projectbrief">C implementation of Fast Additive Homomorphic Encryption</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Fast Additive Homomorphic Encryption (FAHE) Implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>This repository contains the implementation of the FAHE1 and FAHE2 encryption schemes, based on the Fast Additive Partially Homomorphic Encryption from the Approximate Common Divisor Problem. These schemes enable the execution of addition operations directly on encrypted data.</p>
<p>This project attempts to replicate Cominetti's experiments on FAHE1 and FAHE2 with variable security parameters, message lengths, and maximum number of additions.</p>
<p><em>Disclaimer: The FAHE1 &amp; 2 processes described below are merely summarized in importance of our analysis from Cominetti's research and do not explain some of the math involved.</em></p>
<h2><a class="anchor" id="autotoc_md2"></a>
How to Run Homomorphic Additivity Tests</h2>
<p>First, navigate to <code>/tests</code> folder</p>
<p>Changing Constants:</p><ul>
<li>Change <code>NUM_TRIALS</code> to run each test a different number of times (<em>Note:</em> This may make tests slower).</li>
<li>Change <code>TOGGLE_FIXED_MESSAGE</code> for debugging. This generates message lists with only a single unique message.</li>
<li>Change <code>FIXED_MESSAGE</code> to change what unique message is generated.</li>
</ul>
<p>Running Preset Addition Tests:</p><ul>
<li>You can run all addition tests by running <code>python3 -m pytest -s testfahe.py</code></li>
<li>You can run only fahe1 addition tests by running <code>python3 -m pytest -s testfahe.py -m "fahe1"</code></li>
<li>You can run only fahe2 addition tests by running <code>python3 -m pytest -s testfahe.py -m "fahe2"</code></li>
<li>You can run only fast fahe1 addition tests by running <code>python3 -m pytest -s testfahe.py -m "fahe1 and not slow"</code></li>
<li>You can run specific tests/functions by running <code>python3 -m pytest -s -m testfahe.py::[class name]::[test name]</code></li>
</ul>
<p>Running Custom Tests:</p><ul>
<li>Change the custom constants as necessary</li>
<li>Run custom tests by running: <code>python3 -m pytest -s testfahe.py -m "custom"</code></li>
</ul>
<p>Suggested Custom Experiments: You can set your own custom experiment parameters and try running tests</p><ul>
<li>Start with $(\lambda = 128)$</li>
<li>Test with $(|m_{max}| = 32)$ and $(\alpha = 6)$.</li>
<li>Increase $(|m_{max}|)$ to 64 and observe the impact.</li>
<li>Increment $(\alpha)$ gradually (e.g., $(\alpha = 10, 15, 20, 25, 30)$) and evaluate performance.</li>
<li>If higher security is needed, test with $(\lambda = 256)$</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
How to Use This Project</h1>
<p>Clone this repository using: </p><div class="fragment"><div class="line">git clone https://github.com/Oscar11800/Fast-Additive-Homomorphic-Encryption.git</div>
</div><!-- fragment --><p>Make sure to have the current requirements by installing requirements: </p><div class="fragment"><div class="line">pip install -r requirements.txt</div>
</div><!-- fragment --><p>To run the current tests, please reference the above section on running additivity tests</p>
<p>To run the ipynb graphing file:</p><ul>
<li>Navigate to <code>/legacy</code> folder and run: <div class="fragment"><div class="line">jupyter notebook plot_performance.ipynb</div>
</div><!-- fragment --></li>
</ul>
<p>To run csv benchmark tests, edit <code>analysis.py</code> with desired values and run:</p><ul>
<li>Navigate to <code>/legacy</code> folder and run: <div class="fragment"><div class="line">python3 analysis.py</div>
</div><!-- fragment --> </li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
File Structure (Current Testing Framework)</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>src/fahe.py</code>   </td><td class="markdownTableBodyNone">FAHE1 key generation, encryption, and decryption calculations. Used in <code>plot_performance.ipynb</code>, <code>data_collection.py</code>, and <code>test.py</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>tests/testfahe.py</code>   </td><td class="markdownTableBodyNone">Same as <code>fahe1.py</code> but for FAHE2.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md5"></a>
Legacy File Structure (Older Tests)</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>fahe1.py</code>   </td><td class="markdownTableBodyNone">FAHE1 key generation, encryption, and decryption calculations. Used in <code>plot_performance.ipynb</code>, <code>data_collection.py</code>, and <code>test.py</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>fahe2.py</code>   </td><td class="markdownTableBodyNone">Same as <code>fahe1.py</code> but for FAHE2.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>helper.py</code>   </td><td class="markdownTableBodyNone">Helper functions (e.g., prime number calculation). Credit: Oded Leiba.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plot_performance.ipynb</code>   </td><td class="markdownTableBodyNone">Matplotlib graphs of FAHE1 benchmark tests vs. λ, α, and m_max variables.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>data_collection.py</code>   </td><td class="markdownTableBodyNone">Similar to <code>plot_performance.ipynb</code> but creates dictionaries for benchmark testing.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plotting.py</code>   </td><td class="markdownTableBodyNone">Helper class for matplotlib in <code>test.py</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test.py</code>   </td><td class="markdownTableBodyNone">Unit tests for FAHE1/FAHE2 functions, benchmark tests, and plotting.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>analysis.py</code>   </td><td class="markdownTableBodyNone">USE THIS TO RUN EXPERIMENTS! CSV writing code. Edit to run csv benchmark tests with different values.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>old_csv folder</code>   </td><td class="markdownTableBodyNone">Past (outdated) results of experiments.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>experiment_params.txt</code>   </td><td class="markdownTableBodyNone">Contains information on parameters and machine info of the latest experiment run    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>analysis_tests folder</code>   </td><td class="markdownTableBodyNone">USE THIS AFTER ANALYZING. Contains latest csvs from experiments   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md6"></a>
FAHE 1 &amp; 2 Experimentation</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
FAHE 1 &amp; FAHE 2 Facts and Intuitions</h2>
<ul>
<li>FAHE relies on symmetric keys for both encryption and decryption.</li>
<li>FAHE is additively homomorphic, so addition can be performed by any entity.</li>
<li>FAHE is partially and somewhat homomorphic; i.e., they only support addition a limited number of times.</li>
<li>Cominetti states that with a suitable choice of parameters, the total number of additions can be "practically unlimited."</li>
<li>FAHE relies on the Approximate Common Divisor (ACD) as its security problem.</li>
<li>FAHE1 uses distribution of positive noise to encrypt messages.</li>
<li><b>Note: FAHE is unable to provide IND-CCA2 security.</b></li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Assumptions and Variables</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Symbol   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">$   </td><td class="markdownTableBodyLeft">prime number of size $(\eta)$ bits.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">$   </td><td class="markdownTableBodyLeft">integer in interval $([0, 2^{\gamma} / p])$.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">$(\gamma)$: gamma   </td><td class="markdownTableBodyLeft">ciphertext's final size.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">$(\rho)$: rho   </td><td class="markdownTableBodyLeft">noise size, determines $    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">$(\eta)$: eta   </td><td class="markdownTableBodyLeft">secret key size, determines size of $    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">$   </td><td class="markdownTableBodyLeft">random noise defined by $(\rho)$, determines ciphertext's final size    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">(&alpha;): alpha   </td><td class="markdownTableBodyLeft">determines total number of supported additions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">(&lambda;): lambda   </td><td class="markdownTableBodyLeft">security parameter (commonly 128 or 256 bits)   </td></tr>
</table>
<p>If the desired security level against classical computers is $(\lambda)$ bits, we must have:</p><ul>
<li>$(\rho \geq \lambda)$</li>
<li>$(\eta &gt; \rho)$</li>
<li>$(\gamma \geq \Omega\left( \frac{\rho}{\log_2(\rho)} \cdot (\eta - \rho)^2 \right))$</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
FAHE1.Keygen($\lambda$, $|m_{max}|$, $\alpha$)</h2>
<ol type="1">
<li>Choose a suitable security parameter $\lambda$, the maximum message size $|m_{max}|$, and the parameter $\alpha$ that defines the total number of supported additions.</li>
<li>Compute the set of parameters $(\rho, \eta, \gamma)$:<ul>
<li>$\rho = \lambda$</li>
<li>$\eta = \rho + 2\alpha + |m_{max}|$</li>
<li>$\gamma = \left(\frac{\rho}{\log \rho}\right) \cdot (\eta - \rho)^2$</li>
</ul>
</li>
<li>Pick a prime $p$ of size $\eta$ and set $X = 2^{\gamma} / p$.</li>
</ol>
<p>Set the scheme's key to $k = (\rho, |m_{max}|, X, p, \alpha)$.</p>
<ul>
<li><b>Encryption Key (ek):</b> $(p, X, \rho, \alpha)$</li>
<li><b>Decryption Key (dk):</b> $(p, |m_{max}|, \rho, \alpha)$</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
FAHE1.Encr($m$)</h2>
<ol type="1">
<li>Given a message $m$, sample $q \leftarrow [0, X]$.</li>
<li>Generate noise $\text{noise} \leftarrow 0, 1 </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
